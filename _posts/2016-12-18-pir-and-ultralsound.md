---
layout: post
title: Classroom intelligent lighting control system
subtitle: Research
author: Arex
catalog: true
tags:
    - Group meeting
    - IPv6
---

## 背景

打通IPv6通道

## 为什么要加入超声波模块

### 市面上的热释电红外传感器不能检测静止的人(测量范围)的存在

* 若学生坐在座位上很有可能感应不到，导致误发出关闭照明灯的控制信号
* 师姐的论文中提出了一个想法，通过旋转热释电红外传感器来触发相对运动

* 查找PIR sensor原理
![PIR](/img/in-post/pir.png)
 1. PIR 本身有2个槽，并且对红外敏感
 2. PIR 在闲置的时候，检测到同样的红外，辐射来源于周围环境
 3. 当人或热血动物经过时，首先截取到PIR sensor 的一半，导致2部分之间正微分变化，离开时，产生负微分变化
 4. 菲涅尔透镜：汇聚红外线，扩大感应范围
 5. 滤波片

* 相对运动
 1. 电机搭载PIR摆动
 2. 不稳定，在0和1间跳变

* 滤波片

## 可以检测到人存在的传感器还有哪些

* 声音传感器
* 压敏地板
* 检测手机信号和wifi信号
* PIR
* 摄像识别
* 超声波传感器
 1. RAM不够，单片机输出，cc2530接收

## 在cc2530节点接入新的输入信号后，发现没有接收到

### 通过查阅手册

1. 寄存器PxSEL,设置端口的引脚为通用I/O口或者是外部设备I/O信号
2. 寄存器PxDIR,设置断口为输入或输出
3. 与单片机不同

## 感应问题

* 感应范围
1. PIR 100度 2米
2. 超声波传感器 15度 0.5米

* 模拟人体
* 超声波被测物面积小

## 控制

* 逻辑图
设置etimer(contiki有多种定时类型，etimer属于其中一类)，在固定时间产生超时事件

## contiki 多线程

* cotiki内核是基于事件驱动的，系统运行可以视为不断处理事件的过程 
